<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Squares</title>
    <link rel="stylesheet" href="bateau.css">
</head>

<body>
    <select id="game-selector" style="position: absolute; top: 10px; left: 10px; z-index: 1000;">
        <option value="game1">Game 1: Random Squares</option>
        <option value="game2">Game 2: Sonar</option>
        <option value="game3">Game 3: Memory Game</option>
    </select>

    <div id="code-display">
        <span id="code-text">_ _ _ _ _ _</span>
        <div class="corners top-left"></div>
        <div class="corners top-right"></div>
        <div class="corners bottom-left"></div>
        <div class="corners bottom-right"></div>
    </div>
    <div class="progress">
        <h2 class="text">dossiers corrompus traités :</h2>
        <div class="progress-bar-container">
            <div class="progress-bar"></div>
        </div>
    </div>

    <div class="progress-2 hidden">
        <h2 class="text">paires trouvées :</h2>
        <div class="progress-bar-container">
            <div class="progress-bar-2"></div>
        </div>
    </div>

    <section id="main">
        <div class="containers container-1">
            <div class="items item-1"></div>
            <div class="items item-2"></div>
            <div class="items item-3"></div>
            <div class="items item-4"></div>
            <div class="items item-5"></div>
            <div class="items item-6"></div>
            <div class="items item-7"></div>
            <div class="items item-8"></div>
            <div class="items item-9"></div>
            <div class="items item-10"></div>
            <div class="items item-11"></div>
            <div class="items item-12"></div>
            <div class="items item-13"></div>
            <div class="items item-14"></div>
            <div class="items item-15"></div>
            <div class="items item-16"></div>
            <div class="items item-17"></div>
            <div class="items item-18"></div>
            <div class="items item-19"></div>
            <div class="items item-20"></div>
            <div class="items item-21"></div>
            <div class="items item-22"></div>
            <div class="items item-23"></div>
            <div class="items item-24"></div>
            <div class="items item-25"></div>
            <div class="items item-26"></div>
            <div class="items item-27"></div>
            <div class="items item-28"></div>
            <div class="items item-29"></div>
            <div class="items item-30"></div>
            <div class="items item-31"></div>
            <div class="items item-32"></div>
            <div class="items item-33"></div>
            <div class="items item-34"></div>
            <div class="items item-35"></div>
            <div class="items item-36"></div>
        </div>

        <div class="containers container-2" style="display: none;">
            <div class="sonar">
                <div class="radar-bar"></div>
            </div>
            <div class="info"></div>

            <div class="confirmation-section">
                <div id="confirm-button" class="confirm-button">
                    <img src="./assets/images/button.png" alt="Button" class="button-image">
                    <img src="./assets/images/confirm.png" alt="Confirm" class="confirm-image">
                </div>
                <div id="confirmation-message" class="confirmation-message"></div>
            </div>
        </div>

        <div class="containers container-3" style="display: none;">
            <div id="memory-game" class="memory-grid">
                <div class="card">
                    <img src="./assets/images/anchor.png" alt="Anchor">
                </div>
                <div class="card">
                    <img src="./assets/images/coral.png" alt="Coral">
                </div>
                <!-- Ajoutez les autres cartes ici -->
            </div>
        </div>
    </section>

    <div id="end-screen">
        <p id="final-code"></p>
    </div>

    <script src="bateau.js"></script>
    <script>
        function initializeMemoryGame() {
            const cardImages = [
                'anchor',
                'coral',
                'helmet',
                'medusa',
                'O2',
                'shell',
            ]; // Liste des images
            const cardPairs = [...cardImages, ...cardImages]; // Duplique les images pour créer des paires
            const shuffledCards = cardPairs.sort(() => Math.random() - 0.5); // Mélange les cartes
            const memoryGameGrid = document.getElementById('memory-game');
            let firstSelectedCard = null;
            let secondSelectedCard = null;
            let matchedPairs = 0;

            memoryGameGrid.innerHTML = ''; // Réinitialise la grille
            matchedPairs = 0;

            shuffledCards.forEach((imageName, index) => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.image = imageName; // Associe l'image à la carte
                card.dataset.index = index;

                // Ajoute un événement de clic pour retourner la carte
                card.addEventListener('click', () => onMemoryCardClick(card));
                memoryGameGrid.appendChild(card);
            });

            function onMemoryCardClick(card) {
                if (card.classList.contains('flipped') || secondSelectedCard) return;

                // Affiche l'image de la carte
                card.style.backgroundImage = `url('./assets/images/${card.dataset.image}.png')`;
                card.style.backgroundSize = 'cover';
                card.classList.add('flipped');

                if (!firstSelectedCard) {
                    firstSelectedCard = card;
                } else {
                    secondSelectedCard = card;

                    // Vérifie si les deux cartes correspondent
                    if (firstSelectedCard.dataset.image === secondSelectedCard.dataset.image) {
                        matchedPairs++;
                        updateScoreForGame3(matchedPairs, cardImages.length);
                        firstSelectedCard = null;
                        secondSelectedCard = null;
                    } else {
                        // Retourne les cartes après un délai si elles ne correspondent pas
                        setTimeout(() => {
                            firstSelectedCard.style.backgroundImage = '';
                            secondSelectedCard.style.backgroundImage = '';
                            firstSelectedCard.classList.remove('flipped');
                            secondSelectedCard.classList.remove('flipped');
                            firstSelectedCard = null;
                            secondSelectedCard = null;
                        }, 1000);
                    }
                }
            }
        }
    </script>
</body>

</html>